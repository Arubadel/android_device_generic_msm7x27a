From f42edbadc8ec4804412762d963e3db2961b1b259 Mon Sep 17 00:00:00 2001
From: TheWhisp <daavis.90@gmail.com>
Date: Wed, 18 Dec 2013 18:29:03 +0200
Subject: [PATCH] charger: switch off backlight before sending FBIO_BLANK

Change-Id: I7753fd9e56f7522073d5bf6e7a44af82513be26b
---
 charger/charger.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/charger/charger.c b/charger/charger.c
index 6080809..6865d36 100644
--- a/charger/charger.c
+++ b/charger/charger.c
@@ -795,8 +795,8 @@ static void update_screen_state(struct charger *charger, int64_t now)
     if (batt_anim->cur_cycle == batt_anim->num_cycles) {
         reset_animation(batt_anim);
         charger->next_screen_transition = -1;
-        gr_fb_blank(true);
         set_backlight(false);
+        gr_fb_blank(true);
 
 #ifdef ALLOW_SUSPEND_IN_CHARGER
         write_file(SYS_POWER_STATE, "mem", strlen("mem"));
@@ -1290,8 +1290,8 @@ int main(int argc, char **argv)
     ev_sync_key_state(set_key_callback, charger);
 
 #ifndef CHARGER_DISABLE_INIT_BLANK
-    gr_fb_blank(true);
     set_backlight(false);
+    gr_fb_blank(true);
 #endif
 
     charger->next_screen_transition = now - 1;
-- 
1.8.3.2

